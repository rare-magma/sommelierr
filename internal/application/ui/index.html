<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Sommelierr</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
        }

        .card {
            max-width: 600px;
            border: 1px solid #ddd;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, .1);
        }

        .poster {
            max-width: 100%;
            height: auto;
            margin-bottom: 1rem;
        }

        .title {
            font-size: 1.8rem;
            margin: 0;
        }

        .year {
            color: #555;
        }

        .overview {
            margin-top: 1rem;
            line-height: 1.4;
        }

        button {
            padding: 0.6rem 1.2rem;
            font-size: 1rem;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="mediaContainer" class="card" style="display:none;">
        <img id="poster" class="poster" src="" alt="Poster">
        <h2 class="title" id="title"></h2>
        <p class="year" id="year"></p>
        <p class="overview" id="overview"></p>
    </div>
    <button id="movieBtn">Pick another movie ðŸŽ²</button>
    <button id="seriesBtn">Pick another series ðŸŽ²</button>

    <script>
        function load(data) {
            document.getElementById('title').textContent = data.title;
            document.getElementById('year').textContent = '(' + data.year + ')';
            document.getElementById('overview').textContent = data.overview || 'No description.';
            if (data.posterUrl) {
                document.getElementById('poster').src = data.posterUrl;
                document.getElementById('poster').style.display = 'block';
            } else {
                document.getElementById('poster').style.display = 'none';
            }
            document.getElementById('mediaContainer').style.display = 'block';
        }

        async function loadRandomMovie() {
            const resp = await fetch('/movie');
            if (!resp.ok) {
                alert('Failed to get movie: ' + resp.statusText);
                return;
            }
            const data = await resp.json();
            load(data);
        }

        async function loadRandomSeries() {
            const resp = await fetch('/series');
            if (!resp.ok) {
                alert('Failed to get series: ' + resp.statusText);
                return;
            }
            const data = await resp.json();
            load(data);
        }

        document.getElementById('movieBtn').addEventListener('click', loadRandomMovie);
        document.getElementById('seriesBtn').addEventListener('click', loadRandomSeries);
        window.addEventListener('DOMContentLoaded', loadRandomMovie);
    </script>
</body>

</html>